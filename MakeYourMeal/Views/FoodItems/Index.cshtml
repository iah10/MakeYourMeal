@model IEnumerable<MakeYourMeal.Data.Models.Category>

@{
	ViewBag.Title = "Index";
}

<div id="wrapper">
	<!-- Sidebar -->
	<nav class="navbar navbar-inverse navbar-fixed-top" id="sidebar-wrapper" role="navigation">
		<ul class="nav sidebar-nav">
			<li class="sidebar-brand">
				<a href="#">
					Menu
				</a>
			</li>

			@foreach (var item in Model)
			{
				<li class="dropdown">
					<a href="#" class="dropdown-toggle" data-toggle="dropdown">@item.CategoryName</a>
					<ul class="dropdown-menu" role="menu">
						<li>
							@foreach (var subitem in item.FoodItems)
							{
								<a href="#" class="updatePage" id=@Uri.EscapeUriString(subitem.Name)>@subitem.Name</a>
							}
						</li>
					</ul>
				</li>
			}
		</ul>
	</nav>
	<!-- /#sidebar-wrapper -->
	<!-- Page Content -->
	<div id="page-content-wrapper" class="panel-body">
		<button type="button" class="hamburger is-closed" data-toggle="offcanvas">
			<span class="hamb-top"></span>
			<span class="hamb-middle"></span>
			<span class="hamb-bottom"></span>
		</button>
		<div id="plate">

		</div>
	</div>
	<!-- /#page-content-wrapper -->

</div>
<!-- /#wrapper -->
@section scripts
{
	<script type="text/javascript">
		$(document).ready(function () {
			var trigger = $('.hamburger'),
				overlay = $('.overlay'),
				isClosed = false;

			function hamburgerCross() {

				if (isClosed) {
					overlay.hide();
					trigger.removeClass('is-open');
					trigger.addClass('is-closed');
					isClosed = false;
				} else {
					overlay.show();
					trigger.removeClass('is-closed');
					trigger.addClass('is-open');
					isClosed = true;
				}
			}

			trigger.click(function () {
				hamburgerCross();
			});

			$('[data-toggle="offcanvas"]').click(function () {
				$('#wrapper').toggleClass('toggled');
			});
		});
	</script>

	<script type="text/javascript">
		$(function() {
			$(".updatePage").click(function() {
				//get the category id
				var id = $(this).attr("id");
				var url = "/FoodItems/Details/" + id;
				// Perform the ajax call
				$.post(url,
					function(data) {
						//Fill div with results
						$("#plate").html(data);
					});
			});
		});
	</script>
}